<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= typeof title !== 'undefined' ? title : 'WS2 E-commerce' %></title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
</head>

<style>
/* =================================================
   PRINT MODE (Lesson 24 – Print-Friendly PDF Mode)
================================================= */
@media print {

  /* Hide navigation + buttons */
  header,
  footer,
  nav,
  .navbar,
  .navbar-menu,
  .footer,
  .footer-container,
  .footer-bottom,
  .hamburger,
  .no-print,
  .report-actions,
  button,
  a[href],
  form {
    display: none !important;
  }

  body, html {
    margin: 0 !important;
    padding: 0 !important;
    background: #fff !important;
  }

  main.page-content {
    margin: 0 !important;
    padding: 0 !important;
  }

  .summary-centered-section,
  .summary-card,
  .summary-row {
    page-break-inside: avoid !important;
  }

  .summary-centered-section {
    margin: 0 !important;
    padding: 0 !important;
  }

  .summary-card {
    height: auto !important;
    min-height: auto !important;
    padding: 15px 20px !important;
  }

  .daily-sales-section,
  .daily-table-wrapper {
    page-break-inside: avoid !important;
  }

  .sales-chart-title,
  .chart-container {
    page-break-inside: avoid !important;
  }

  /* PRINT FIX */
  .summary-centered-section {
    text-align: center !important;
    margin: 20px auto !important;
    width: 100% !important;
    display: block !important;
  }

  .summary-card {
    margin: 0 auto !important;
    width: 60% !important;
  }

  .sales-chart-block {
    page-break-inside: avoid !important;
  }
}
</style>


<body>

<!-- CHECK IF PAGE WANTS CLEAN MODE -->
<% const hideChrome = typeof hideLayoutChrome !== "undefined" && hideLayoutChrome === true; %>

<!-- ================= NAVBAR ================= -->
<% if (!hideChrome) { %>
<header class="navbar">
  <a href="/" class="navbar-brand">Commonwealth</a>

  <div class="hamburger" onclick="toggleMenu()">
    <span></span><span></span><span></span>
  </div>

  <ul class="navbar-menu" id="navLinks">

    <% if (!user || user.role === 'customer') { %>
      <li><a href="/">Home</a></li>
      <li><a href="/products">Shoes</a></li>

      <li class="nav-cart">
        <a href="/cart" class="cart-link">
          Cart <span id="navCartCount">(<%= cartCount %>)</span>
        </a>
      </li>
    <% } %>

    <% if (user && user.role === 'admin') { %>
      <li><a href="/products/admin/products">Products</a></li>
      <li><a href="/users/list">Manage Users</a></li>
      <li><a href="/admin/orders">Orders</a></li>
      <li><a href="/admin/reports/sales">Sales Reports</a></li>
    <% } %>

    <% if (user) { %>
      <% if (user.role === 'admin') { %>
        <li><a href="/admin/dashboard">Dashboard</a></li>
      <% } else { %>
        <li><a href="/users/dashboard">Dashboard</a></li>
        <li><a href="/orders">My Orders</a></li>
      <% } %>

      <li><a href="/users/logout">Logout</a></li>

    <% } else { %>
      <li><a href="/users/register">Register</a></li>
      <li><a href="/users/login">Login</a></li>
    <% } %>

  </ul>
</header>
<% } %>

<!-- ================= PAGE CONTENT ================= -->
<main class="page-content" style="<%= hideChrome ? 'padding:0; margin:0; min-height:100vh;' : '' %>">
  <%- body %>
</main>

<!-- ================= FOOTER ================= -->
<% if (!hideChrome) { %>
<footer class="footer">

  <% if (!user || user.role === 'customer') { %>
    <div class="footer-container">

      <div class="footer-column">
        <h4>Contact</h4>
        <ul>
          <li><a href="/about">About Us</a></li>
          <li><a href="/stores">Store Locations</a></li>
          <li><a href="/contact">Get In Touch</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h4>Support</h4>
        <ul>
          <li><a href="/terms">Terms & Conditions</a></li>
          <li><a href="/privacy">Privacy Policy</a></li>
          <li><a href="/faq">FAQs</a></li>
          <li><a href="/shipping">Shipping</a></li>
          <li><a href="/returns">Returns</a></li>
        </ul>
      </div>

      <div class="footer-column newsletter">
        <h4>Newsletter</h4>
        <form class="newsletter-form" onsubmit="return false;">
          <input type="email" placeholder="Email Address" required />
          <input type="text" placeholder="Shoe Size" />
          <button type="submit">Subscribe</button>
        </form>
      </div>

    </div>
  <% } %>

  <div class="footer-bottom">
    <p>© 2025 Commonwealth | All Rights Reserved</p>
  </div>

</footer>
<% } %>

<script src="https://kit.fontawesome.com/a2e0ad1c42.js" crossorigin="anonymous"></script>

<script>
  function toggleMenu() {
    document.getElementById('navLinks').classList.toggle('show');
  }
</script>

</body>
</html>
