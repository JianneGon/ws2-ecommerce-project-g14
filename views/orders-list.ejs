<h1 class="page-title">My Orders</h1>

<% if (!orders || !orders.length) { %>

  <p class="no-users-text">You have no orders yet.</p>
  <p class="register-user-link">
    <a href="/products" class="btn-primary">Start Shopping</a>
  </p>

<% } else { %>

<div class="orders-list-container">

  <!-- HEADER -->
  <div class="orders-header-row">
      <span class="col-id">Order ID</span>
      <span class="col-date">Date</span>
      <span class="col-items">Items</span>
      <span class="col-total">Total</span>
      <span class="col-status">Status</span>
      <span class="col-view">Actions</span>
  </div>

  <!-- ROWS -->
  <% orders.forEach(order => { 
      
    const s = order.status || "unknown";
    let badgeClass = "";

    if (s === "paid") badgeClass = "badge-paid";
    else if (s === "to_ship") badgeClass = "badge-to-ship";
    else if (s === "shipped") badgeClass = "badge-shipped";
    else if (s === "to_receive") badgeClass = "badge-to-receive";
    else if (s === "completed") badgeClass = "badge-completed";
    else if (s === "cancelled") badgeClass = "badge-cancelled";
    else if (s === "refund") badgeClass = "badge-refund";
    else if (s === "to_pay") badgeClass = "badge-to-pay"; // OLD ORDERS
    else badgeClass = "badge-completed"; // fallback default

  %>

      <div class="orders-row">

        <!-- ORDER ID -->
        <div class="col-id">
          <span class="order-id-text"><%= order.orderId %></span>
        </div>

        <!-- DATE -->
        <div class="col-date">
          <%= new Date(order.createdAt).toLocaleDateString('en-US', {
                month: 'short', day: 'numeric', year: 'numeric'
              }) %>
        </div>

        <!-- ITEMS COUNT -->
        <div class="col-items">
          <%= order.totalQty %>
        </div>

        <!-- TOTAL AMOUNT -->
        <div class="col-total">
          â‚±<%= Number(order.totalAmount).toLocaleString() %>
        </div>

        <!-- STATUS BADGE -->
        <div class="col-status">
          <span class="status-badge <%= badgeClass %>">
            <%= s.replace(/_/g, " ").replace(/\b\w/g, c => c.toUpperCase()) %>
          </span>
        </div>

        <!-- ACTIONS -->
        <div class="col-view">
          <a href="/orders/<%= order.orderId %>" class="order-view-btn">View Details</a>
        </div>

      </div>

  <% }) %>

</div>

<% } %>
